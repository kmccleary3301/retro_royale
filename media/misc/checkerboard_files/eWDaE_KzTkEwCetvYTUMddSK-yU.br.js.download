var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},ColPickerBeh,FavRequest;(function(n){n[n.All=0]="All";n[n.Data=1]="Data"})(ColPickerBeh||(ColPickerBeh={})),function(n){function o(n){return"image:cid="+n.cid}function s(n){return"product:cid="+n.cid}function h(n){return"video:mid="+n.mid}function c(n){return"webdoc:url="+(n.url||n.purl)}function l(n){return n.id}function a(n){return"recipe:sid="+(n.sid||n.entityId)}function r(n){var t=n.collectionType,i=n.id,r=n.title;return t?{PredefinedCollection:Constants.PredefinedCollections[t]}:i?{collectionId:i}:{collectionTitle:r}}function v(n,t){return __assign(__assign({},n),{type:t,MediaId:n.mid,MediaUrl:n.murl,PageUrl:n.purl})}function y(n){var t,i=[];return n.tid?i.push({ThumbnailId:n.tid,Width:n.tw,Height:n.th}):n.turl&&i.push({ExternalThumbnailUrl:n.turl,Width:n.tw,Height:n.th}),{Id:n.id,ContentId:n.contentId,FriendlyDomainName:n.fdn,Title:n.title,ThumbnailInfo:i,ClickThroughUrl:n.url,ItemTagPath:n.itemtagpath,CustomData:(t=n.customdata)!==null&&t!==void 0?t:null,Note:n.note}}function p(n,t,i,r){return{type:t,collectionItemId:i(n),collection:r}}function w(n,t,i){return{Id:t(n),SourceCollectionId:i.collectionId}}function b(n){n[0]||(n=[n]);var t=n[0],f=u(n,!0),e={CollectionItemType:i,Items:__spreadArray(__spreadArray([],f.Items,!0),f.itemReferences,!0),TargetCollection:r(t.specifier||t.Specifier)};return t.position!==undefined&&t.position!==null&&(e.Position=t.position),e}function k(n){n[0]||(n=[n]);var t=n[0],i=u(n,!0);return{Items:__spreadArray(__spreadArray([],i.Items,!0),i.itemReferences,!0),TargetCollection:r(t.specifier||t.Specifier)}}function d(n){n[0]||(n=[n]);var t=u(n);return{CollectionItemType:i,ItemReferences:t.itemReferences,Items:t.Items}}function u(n,t){for(var b,it,rt,ut,k,ft,gt,d,et,ot,g,st,ni,nt,ht,ti,u=[],ct=[],tt=0,lt=n;tt<lt.length;tt++){var i=lt[tt],at=i.images,vt=i.Images,yt=i.videos,pt=i.Videos,wt=i.entities,bt=i.specifier,kt=i.webresults,dt=i.generics,f=bt&&!t?r(bt):null,e=t?v:p,ii=t?y:w;if(at||vt)for(b=0,it=at||vt;b<it.length;b++)rt=it[b],ut=rt.intent==="Shopping",u.push(e(rt,ut?"product":"image",ut?s:o,f));if(yt||pt)for(k=0,ft=yt||pt;k<ft.length;k++)gt=ft[k],u.push(e(gt,"video",h,f));if(wt)for(d=0,et=wt;d<et.length;d++)ot=et[d],ot.intent==="Recipe"&&u.push(e(ot,"recipe",a,f));if(kt)for(g=0,st=kt;g<st.length;g++)ni=st[g],u.push(e(ni,"webdoc",c,f));if(dt)for(nt=0,ht=dt;nt<ht.length;nt++)ti=ht[nt],ct.push(ii(ti,l,f))}return{itemReferences:u,Items:ct}}function g(n){var t=u(n.sources);return{collectionItemType:i,targetCollection:r(n.destination),itemReferences:t.itemReferences,Items:t.Items}}function nt(n){for(var s,f=[],e=u(n.sources),t=0,o=n.targets;t<o.length;t++)s=o[t],f.push(r(s));return{collectionItemType:i,targetCollections:f,itemReferences:e.itemReferences,Items:e.Items}}function tt(n){return{collectionItemType:i,targetCollections:[{collectionId:n.id}]}}function it(n){var t={collectionTitle:n.title};return n.collectionTagPath&&(t.collectionTagPath=n.collectionTagPath),n.customData&&(t.customData=n.customData),{targetCollection:t}}function rt(n){return{targetCollection:{collectionId:n.CollectionId},title:n.NewTitle}}function ut(n){return{targetCollection:{collectionId:n.id}}}function ft(n){return{shareId:n.id}}function et(n){var t=u([n]);return{collectionItemType:i,itemReferences:t.itemReferences,items:t.Items}}function ot(n){var f,t={collectionItemType:n.collectionItemType||i},u,e,o;if(((f=n.targetCollections)===null||f===void 0?void 0:f.length)>0)for(t.targetCollections=[],u=0,e=n.targetCollections;u<e.length;u++)o=e[u],t.targetCollections.push(r(o));return n.maxItemsToFetch&&(t.maxItemsToFetch=n.maxItemsToFetch),n.shouldFilterKCT&&(t.shouldFilterKCT=n.shouldFilterKCT),n.shouldFetchMetadata&&(t.shouldFetchMetadata=n.shouldFetchMetadata),t}function st(n,t,i,r,u){var e,o,s,f;if(n){n=n+t;e={};_G&&(e.PIG=_G.IG);u&&(e.Comp=u);o=vt();o&&(e.sid=o);for(s in e)n=PrismUtils.appendUrlParam(s,e[s],n);typeof addCommonPersistedParams=="function"&&(n=addCommonPersistedParams(n));typeof MMTestUtils!="undefined"&&(n=MMTestUtils.atb(n,t),n=MMTestUtils.adl(n));i=i===null?"":i;f=sj_gx();f.open("POST",n,!0);f.withCredentials=!0;f.setRequestHeader("Content-type","application/json");f.onreadystatechange=function(){var i,n;f.readyState==4&&r&&(f.status==200?(n=JSON.parse(ht(f.response||f.responseText)),"isSuccess"in n&&t!=="items/status?"?r({IsSuccess:n.isSuccess,Message:n.message||n.shareId||null,Status:1,CollectionId:(i=n.collection)===null||i===void 0?void 0:i.id,TargetCollectionOperationStatus:n.targetCollectionOperationStatus}):r(n)):r(null))};f.send(JSON.stringify(i))}}function ht(n){for(var t=n,r,i;(r=t.indexOf("<!--<![CDATA["))>=0;){if(i=t.indexOf("]\]>-->"),i<0)break;t=t.substr(0,r)+t.substr(i+6)}return t}function t(n,t,i){return i===void 0&&(i=e),function(r,u,f){f===void 0&&(f="");st(i,n,t?t(r):r,u,f)}}function ct(){}function lt(){}function at(){}function vt(){return typeof sj_cook!="undefined"?_G.SID||sj_cook.get("_SS","SID"):undefined}function yt(n){var t,i;if(!n)return null;if(t=n===null||n===void 0?void 0:n.content,!t)return n.collectionItemId;i=n.collectionItemId;switch(t._type){case"GenericItem":i=t.contentId;break;case"ImageObject":i=t.imageId;break;case"VideoObject":i=t.videoId}return i}var i="all",f="/mysaves/",e=f+"collections/";n.changeTitle=t("rename",rt);n.addItem=t("items/add",b);n.updateItems=t("items/update",k);n.deleteItems=t("items/delete",d);n.deleteCollection=t("delete",tt);n.useForRec=ct;n.moveItems=t("items/move",g);n.copyItems=t("items/copy",nt);n.getStatus=t("items/status",et);n.writePref=t("writepref",null,f);n.getCollectionPicker=lt;n.shareCollection=t("share",ut);n.unshareCollection=t("unshare",ft);n.createCollection=t("create",it);n.getCollection=t("get",ot);n.setRequestType=at;n.extractContentId=yt}(FavRequest||(FavRequest={}))